<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CLUSTERfoo! - Syncing with a Remote Server Using Rsync Over SSH</title>
    <link rel="stylesheet" href="/style/style.css">
    <link href="atom.xml" type="application/atom+xml" rel="alternate" title="Atom Feed">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.1"> 
    <!-- Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-33332254-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div id="everything">
      <div id="main">
        <header>
          <hgroup>
            <h1>CLUSTERfoo!</h1>
            <h2>Possibly the best blog on the topic of me.</h2>
          </hgroup>
        </header>
        <div id="content">
<!-- TODO: ================================================================= -->
              
             <!--  CLEAN UP THIS HORRIBLE MESS! -->

<!-- ======================================================================= -->

          
            <article>
              <h2>Syncing with a Remote Server Using Rsync Over SSH</h2>
          
          <!-- _. -->

<p>Rsync is a command-line utility for copying and syncing files. Rsync can be 
used over ssh to sync files between remote servers. The basic command
for use over ssh is</p>

<pre><code>$ rsync [options] -e "ssh" source target
</code></pre>

<p>If you’ve set up private and public keys to secure your ssh connection, you must 
specify the location of the identity key (also known as “private key”), which 
is usually found in the <code>~/.ssh</code> directory:</p>

<pre><code>$ rsync [options] -e "ssh -i /home/user/.ssh/private_key_file"
</code></pre>

<p>I use rsync to deploy my blog. All of its contents are found <a href="http://github.com/clusterfoo/clusterfoo-dot-com">in the <code>output</code>
directory</a>, which I sync with
a small shared server at <a href="http://asmallorange.com">A Small Ornage</a>. </p>

<p>I use the following simple command:</p>

<pre><code>$ rsync -avh [-n] --progress --delete-after -e "ssh -i /home/username/.ssh/id_rsa" \
  output/ username@clusterfoo.com:/home/username/public_html/
</code></pre>

<ul>
<li>
<code>-a</code>: Archive mode. The most common option for syncing directories.</li>
  <li>
<code>-v</code>: Verbose mode.</li>
  <li>
<code>-h</code>: Human readable. Print numbers in human-readable formats.</li>
  <li>
<code>-n</code>: Dry run.</li>
  <li>
<code>--progress</code>: Show progress during transfer.</li>
  <li>
<code>--delete-after</code>: Sync new and updated files, and wait until transfer is 
complete before deleting any superfluous files. This is important when deploying
a website, since otherwise a visitor might stumble upon missing pages.</li>
</ul><h3 id="always-dry-run-first">Always Dry-Run First!</h3>

<p>It’s easy to make mistakes with rsync. A simple typo like <code>dir</code> instead of 
<code>dir/</code> can mean a world of difference (and a world of pain if you accidentally 
<code>-rm</code> an entire directory!).</p>

<p>I always do a dry-run before I use an rsync command for the first time. The 
dry-run option (<code>-n</code>) will show you the final output of the operation, 
without actually running through it.</p>
          
            </article>
            <div id="disqus_thread"></div>
              <script type="text/javascript">
                  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                  var disqus_shortname = 'clusterfoo'; // required: replace example with your forum shortname

                  /* * * DON'T EDIT BELOW THIS LINE * * */
                  (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
              </script>
              <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        

<!-- ======================== end of TODO =================================  -->

        </div>

      </div>
      <aside id="sidebar">
        <div id="sidebar-content">
  <!-- menu -->
  <h3>Browse:</h3>
  <nav id="main-menu">
    <ul>
      <li><a href="/" title="Homepage">Home</a>
      <li><a href="/all-articles">All Articles</a>
      <li><a href="/links">Check it Out!</a>
      <li><a href="/talks">Watch This!</a>
      <li><a href="http://github.com/clusterfoo" title="My code on github" 
        target="_blank">My Github</a>
      <li><a href="/me/about" title="About Me">About Me</a>
    </ul>
  </nav>

  <h3>My "Blurblog":</h3>
  <p>News articles I'm sharing and talking about on NewsBlur:
  <a href="http://clusterfoo.newsblur.com">Click it, ya dingus.</a>

  <h3>Subscribe in a Reader:</h3>

  <p><a href="http://feeds.feedburner.com/Clusterfoo" title="Subscribe to my feed" 
    rel="alternate" type="application/rss+xml"><img 
      src="//feedburner.google.com/fb/images/pub/feed-icon32x32.png" alt="" 
      style="border:0"/></a>
      <a href="http://feeds.feedburner.com/Clusterfoo" 
        title="Subscribe to my feed" rel="alternate" 
        type="application/rss+xml">Click me!</a>

</div>


      </aside>
      <footer>
        &copy; 2013 Noam Gagliardi
      </footer>
    </div>
  </body>
</html>
